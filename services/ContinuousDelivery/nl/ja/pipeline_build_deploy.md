---

copyright:
  years: 2016, 2017
lastupdated: "2017-3-16"
---
<!-- Copyright info at top of file: REQUIRED
    The copyright info is YAML content that must occur at the top of the MD file, before attributes are listed.
    It must be surrounded by 3 dashes.
    The value "years" can contain just one year or a two years separated by a comma. (years: 2014, 2016)
    Indentation as per the previous template must be preserved.
-->

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen:.screen}
{:codeblock:.codeblock}

# ビルドとデプロイ
{: #deliverypipeline_build_deploy}

IBM&reg; Bluemix&reg; {{site.data.keyword.deliverypipeline}} サビスでは、反復可能な継続的統合および継続的デリバリのプロセスを実装できます。
{:shortdesc}

パイプラインを作成して構成するには、以下のタスクを実行します。

## ステジの追加
{: #deliverypipeline_add_stage}

1. 「パイプライン」ペジで、**「ステジの追加」**をクリックします。「ステジ構成」ペジが開きます。
2. ステジを構成します。
  1. **「入力」**タブで、ステジの入力を選択します。
  2. **「ジョブ」**タブで、少なくとも 1 つのジョブを追加して構成します。通常、最初のステジには、少なくとも 1 つのビルド・ジョブがあります。
3. **「保存」**をクリックします。

## ステジへのジョブの追加
{: #deliverypipeline_add_job}

1. ステジで、**「ステジ構成」**アイコンをクリックし、**「ステジの構成」**をクリックします。
2. **「ジョブ」**タブをクリックします。
3. **「ジョブの追加」**をクリックします。追加するジョブのタイプを選択します。
4. ジョブを構成します。
5. **「保存」**をクリックします。

![ステジへのジョブの追加](images/AddJob2.png)

## ステジの実行
{: #deliverypipeline_run_stage}

「パイプライン」ペジで**「ステジの実行」**アイコンをクリックして、手動でステジを実行できます。

![ステジでの「ステジの実行」アイコンのクリック](images/RunStage.png)

次の 2 つの方法のいずれかを使用して、ビルド履歴ペジからオンデマンドのビルドとデプロイメントを要求することもできます。
* 構成されたステジの下にあるボックスにビルドをドラッグする。
* ビルドの隣にある**「送信先」**アイコンをクリックして、デプロイ先のスペスを選択する。![「このビルドでステジを実行する (Execute stage with this build)」アイコン](images/deploy_to.png)

実行中のステジをキャンセルするには、ステジで**「ログおよび履歴の表示」**をクリックします。ジョブのリストで、実行中のジョブの番号をクリックし、**「キャンセル」**をクリックします。ジョブをクリックして**「キャンセル」**をクリックするか、そのステジのジョブの隣にある**「停止」**アイコンをクリックすることにより、ジョブを個別にキャンセルすることもできます。

## アプリのデプロイ
{: #deliverypipeline_deploy}

デプロイ・ジョブが適切に構成されていれば、いつでもそのジョブが実行されるときに、アプリがタゲットにデプロイされます。デプロイ・ジョブを手動で実行するには、ジョブがあるステジの**「ステジの実行」**アイコンをクリックします。

###入力の改訂
ステジを手動で実行するか、その前のステジが完了したために実行される場合、実行中のステジはその入力の改訂を選択します。通常、入力の改訂はビルド番号です。入力の改訂を選択するには、ステジは以下の条件に従う必要があります。

* 特定の改訂が選択されている場合は、それを使用する。
* 特定の改訂が指定されていない場合は、同じ入力を使用するステジが見つかるまで前のステジを検索し、その入力の最後に成功した実行の改訂を見つけて使用する。
* 特定の改訂が指定されておらず、その他のステジが指定ソスを入力として使用しない場合、入力の最新の改訂を使用する。

**ヒント:** 前のビルドをデプロイすることができます。ビルドが含まれるステジで、**「ログおよび履歴の表示」**をクリックします。ペジが開いたら、実行番号をクリックして展開し、ビルド・ジョブをクリックします。**「送信先」**をクリックし、タゲットを選択します。

###アプリへのサビスの追加
アプリにサビスを追加し、Bluemix ダッシュボドまたは Cloud Foundry コマンド・ライン・インタフェス (CLI) からそれらのサビスを管理することができます。パイプライン・ジョブでは、スクリプトで Cloud Foundry CLI コマンドを発行することもできます。例えば、デプロイ・ジョブのスクリプトでアプリにサビスを追加することができます。サビスの追加について詳しくは、[アプリケションへのサビスの追加](/docs/services/reqnsi.html#add_service)を参照してください。

## ログの表示
{: #deliverypipeline_view_logs}

「ステジ履歴」ペジでの実行中に、ジョブのログおよびステジを表示することができます。

ジョブのログを表示するには、ジョブをクリックします。または、ステジで**「ログおよび履歴の表示」**をクリックします。

デプロイされているアプリケションのランタイム・ログを表示するには、**「ランタイム・ログの表示」**をクリックします。

![関連するログを開くためにクリックできるステジ・タイル内の領域](images/view_logs_and_history.png)

ジョブ・ログに加えて、ビルド・ジョブの単体テストの結果、生成された成果物、コドの変更も表示できます。

「ステジ履歴」ペジからステジを実行、取り
消し、または構成することもできます。**「実行」**をクリックしてステジを実行、または**「構成」**をクリックしてステジを構成することができます。ステジの実行中に実行番号をクリックして**「キャンセル」**をクリックすることにより、そのステジをキャンセルできます。
