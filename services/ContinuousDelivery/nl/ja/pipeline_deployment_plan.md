---

copyright:
  years: 2017
lastupdated: "2017-4-11"

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen:.screen}
{:codeblock:.codeblock}

# 複合パイプライン用のデプロイメント計画のカスタマイズ
{: #tasks_overview}

複合パイプライン用のデプロイメント計画で、タスクは、ソフトウェア・デプロイメントに関連した、ビジネスにとって意味のあるアクティビティを表します。タスクは、デプロイメント計画に定義されています。

{:shortdesc}

多くのタスクには、開始点、終了点、および測定可能な期間があります。タスクは、次のいずれかのタイプになります。

<ul>
<li>手動タスクは、サバをオフラインにしたりデタベスを更新したりするなどの、ソフトウェア・デプロイメントに関連したすべてのアクティビティを表すことができます。</li>
<li>UrbanCode Deploy タスクは、IBM&reg; UrbanCode&reg; Deploy アプリを表しています。IBM UrbanCode Deploy アプリは、IBM UrbanCode Deploy タイプのタスクを使用して実行できます。</li>
<li>Continuous Delivery Pipeline タスクは、{{site.data.keyword.contdelivery_full}} の一部である {{site.data.keyword.deliverypipeline}} のインスタンスを表します。{{site.data.keyword.deliverypipeline}} のインスタンスは、このタスク・タイプを使用して管理できます。</li>
<li>遅延実行タスクは、特定の時刻に発生する重大なイベントを表します。</li>
<li>ヘッダ・タスクは編成要素です。例えば、タスク・グルプを識別するためにヘッダ・タスクを使用する場合があります。</li>
</ul>

<!-- You can add tasks to deployment plans by creating tasks or you can import tasks from CSV files that are created by IBM UrbanCode Release or another application. You can also copy tasks from other deployment plans. See [Importing tasks](/docs/services/UCCR/UCCR_deployPlan.html#plan_importTasks) for information about the format of the CSV file. -->

## タスクの作成
{: #tasks_create}

タスクを作成する際は、そのタスクを追加するデプロイメント計画を選択します。デフォルトで、新しいタスクはデプロイメント計画の最後に挿入されます。タスクが作成された後は、それを別のデプロイメント計画に移動したり、コピして貼り付けたりすることができます。また、他の[タスク](/docs/services/ContinuousDelivery/pipeline_deployment_plan.html#tasks_dependencies)との依存関係を作成することもできます。

タスクを保存すると、そのタスクのアクション・アイコンが表示されます。それらのアクション・アイコンを使用して、デプロイメント中にタスクの状況を変更することができます。すべてのタスクには、**「スキップ」**アクション・アイコンがあります。その他のアイコン (例えば、**「開始」**など) は、それらのアイコンにとって適切なコンテキストの時に表示されます。

![](../UCCR/images/deploy-plan-intro.png "標準的なデプロイメント計画")

*図 1. タスクとアクション・アイコンを持つシンプルなデプロイメント計画*

デプロイメント計画内の各タスクは、別々の行に含まれています。各タスクに対して表示される情報を以下の表で説明します。

### 表 1. タスク・プロパティ

| プロパティ       | 説明               |
| ------------------ | ------------------ |
| 名前               |タスク名       |
| タイプ               |タスクのタイプ: 手動、Continuous Delivery Pipeline、遅延実行、E メル、ヘッダ / 注、UrbanCode Deploy|             
| 状況             |タスク状況: 開始していない、完了、失敗、スキップ、適用外 |
| 所有者              |タスクが割り当てられている個人                                                        |
| 開始時刻  |予定された開始に基づいた開始時刻または予想開始時刻、または他のタスクの推定期間        |
| 終了時刻               |タスクが解決された時刻        |
| 期間               |タスク開始からタスク解決までの時間の長さ (分単位)        |
| 依存関係               |タスクの前提条件であり、タスクに依存しているタスクの数        |

---
タスクがデプロイメント計画に追加された後は、いくつかの方法でそれらのタスクを管理できます。

   * タスクを移動するには、新しいロケションにドラッグします。

   * タスクまたはグルプをコピするには、タスクをクリックし、**「コピ」**アイコン <img class="inline" src="../UCCR/images/copy-group.png"  alt="コピ・アイコン">をクリックし、コピしたタスクを挿入する場所にカソルを置き、**「貼り付け」**アイコン<img class="inline" src="../UCCR/images/paste-group.png"  alt="貼り付けアイコン">をクリックします。

   * デプロイメント計画からタスクまたはグルプを切り取るには、タスクをクリックし、**「切り取り」** <img class="inline" src="../UCCR/images/cut-group.png"  alt="切り取りアイコン"> をクリックします。

   * タスクを削除するには、タスクをクリックし、**「削除」** <img class="inline" src="../UCCR/images/trash-group.png"  alt="削除アイコン"> をクリックします。デプロイメント計画からタスクが削除されます。

## 手動タスクの作成
{: #tasks_manual}

通常、手動タスクは、開始点、終了点、および測定可能な期間のあるソフトウェア・リリスに関連したアクティビティを表しています。

手動タスクを作成するには、以下のステップを実行します。

1. 「デプロイメント計画の詳細」ペジで、**「タスクの作成」**をクリックします。計画内の特定の位置にタスクを挿入するには、**「タスクの作成」**をクリックする前にタスクを選択します。新しいタスクが、選択したタスクの上に挿入されます。

1. 「タスクの作成」ウィンドウの**「タイプ」**リストから、**「手動」**を選択します。

1. **「名前」**フィルドにタスクの名前を入力します。

3. **「期間 (分単位)」**フィルドに、タスクが完了するまでの予想実行分数を入力します。この推定期間は、予想されるデプロイメント時間を計算するために使用されます。

3. **「タグ」**リストで、タスクにタグを追加します。複数のタグを選択できます。タグを作成するには、リストのフィルドにタグ名を入力します。

3. **「割り当て済みグルプおよびユザ (Assigned groups and users)」**リストで、ユザまたはグルプにタスクを割り当てます。割り当てられているユザが、デプロイメント中にタスクを実行します。

3. **「所有者」**リストから、タスクの所有者を選択します。デフォルト所有者は、タスクを作成したユザです。**「所有者」**リストは、タスクがユザまたはグルプに割り当てられた後に表示されます。    

5. **「保存」**をクリックします。タスクがデプロイメント計画に挿入されます。

## 遅延実行タスクの作成
{: #tasks_delayed}

遅延実行タイプのタスクは、デプロイメント中のマイルストンまたは重大なイベントを表しています。遅延実行タスクを使用すると、重要なタスクを予想時刻に確実に開始することができます。通常、遅延実行タスクは、他の重要なタスクの前提条件です。

遅延実行タスクは、実行適格になるとすぐに開始され、ユザの指定した時刻に終了します。開始された遅延実行タスクの状況は、計画されている時刻に達して状況が「完了」に変わるまでは、「進行中」になります。遅延実行タスクが完了すると、そのタスクに依存するタスクが実行を開始します。

遅延実行タスクを作成するには、以下のステップを実行します。

1. 「デプロイメント計画の詳細」ペジで、**「タスクの作成」**をクリックします。計画内の特定の位置にタスクを挿入する場合は、**「タスクの作成」**をクリックする前にタスクを選択します。新しいタスクが、選択したタスクの上に挿入されます。

1. 「タスクの作成」ウィンドウの**「タイプ」**リストから、**「遅延実行」**を選択します。

1. **「名前」**フィルドにタスクの名前を入力します。

3. **「時刻」**フィルドで、タスクが完了する時刻を入力するか選択します。

3. **「タイム・ゾン」**リストから、**「時刻」**フィルドに入力した値のタイム・ゾンを選択します。    

5. **「保存」**をクリックします。タスクがデプロイメント計画に挿入されます。

## ヘッダ・タスクの作成
{: #tasks_header}

ヘッダ・タスクは、デプロイメント計画に追加できる編成要素を表しています。タスク・グルプを作成した場合、ヘッダ・タスクを使用してそのグルプを識別する場合があります。ヘッダ・タスクは、他のタスクと同様に依存関係を持つことができます。

<!-- When you import a deployment plan from IBM UrbanCode Release, segment tasks are bracketed by note-type Start Segment and End Segment tasks. Segment dependencies are represented by dependencies to End Segment tasks. -->

ヘッダ・タスクを作成するには、以下のステップを実行します。

1. 「デプロイメント計画の詳細」ペジで、**「タスクの作成」**をクリックします。計画内の特定の位置にタスクを挿入する場合は、**「タスクの作成」**をクリックする前にタスクを選択します。新しいタスクが、選択したタスクの上に挿入されます。

1. 「タスクの作成」ウィンドウの**「タイプ」**リストから、**「ヘッダ」**を選択します。

1. **「名前」**フィルドにタスクの名前を入力します。この名前は、タスク・グルプ名を表す場合があります。

3. **「説明」**フィルドに説明を入力するか貼り付けます。注釈、覚書、またはその他の指示を入力できます。

5. **「保存」**をクリックします。タスクがデプロイメント計画に挿入されます。

## Delivery Pipeline タスクの作成
{: #tasks_pipelineCD}

{{site.data.keyword.contdelivery_short}} サビスで、{{site.data.keyword.deliverypipeline}} は DevOps ワクフロを自動化します。{{site.data.keyword.deliverypipeline}} のインスタンスは、パイプライン・タスクを使用して管理できます。

Delivery Pipeline タスクを作成するには、以下のステップを実行します。

1. 「デプロイメント計画の詳細」ペジで、**「タスクの作成」**をクリックします。計画内の特定の位置にタスクを挿入する場合は、**「タスクの作成」**をクリックする前にタスクを選択します。新しいタスクが、選択したタスクの上に挿入されます。

1. 「タスクの作成」ウィンドウの**「タイプ」**リストから、**「Continuous Delivery Pipeline」**を選択します。

1. **「名前」**フィルドにタスクの名前を入力します。この名前は、タスク・グルプ名を表す場合があります。

3. **「説明」**フィルドに説明を入力するか貼り付けます。注釈、覚書、またはその他の指示を入力できます。

3. **「パイプライン ID」**フィルドにパイプライン ID を入力するか貼り付けます。

3. **「ステジ名」**フィルドにステジ名を入力するか貼り付けます。

5. **「保存」**をクリックします。タスクがデプロイメント計画に挿入されます。

## タスク・グルプの管理
{: #tasks_groups}

2 つ以上のタスクを 1 つのタスク・グルプに結合することができます。グルプを作成する際は、グルプの実行パタン (順次または並列) を定義します。並列パタン・グルプ内のタスクは任意の順序で実行でき、依存関係が存在しない限りタスクは同時に実行できます。順次グルプ内のタスクは、先頭または最上位のタスクから開始して、リスト順に実行されます。

グルプを他のグルプ内に埋め込むことができます。順次パタンのグルプを並列パタンのグルプ内に埋め込んだり、逆に並列パタンのグルプを順次パタンのグルプ内に埋め込んだりすることができます。ただし、順次パタンのグルプを別の順次グルプ内に埋め込んだり、並列パタンのグルプを別の並列グルプ内に埋め込んだりすることはできません。  

タスク・グルプを作成するには、以下のステップを実行します。

1. 「デプロイメント計画の詳細」ペジで、2 つ以上のタスクを選択します。

1. 作成するグルプのタイプに従って、以下のいずれかのステップを実行します。

  <ul>
  <li>並列グルプを作成するには、**「並列」**アイコン <img class="inline" src="../UCCR/images/para-icon.png"  alt="並列グルプ・アイコン"> をクリックします。選択したタスクで並列グルプを作成できない場合は、アイコンが無効になっています。例えば、選択したすべてのタスクが既に並列グルプに含まれている場合は並列グルプを作成できない可能性があります。</li>
  <li>順次グルプを作成するには、**「順次」**アイコン <img class="inline" src="../UCCR/images/seq-icon.png"  alt="順次グルプ・アイコン"> をクリックします。
  </li>
  </ul>

グルプが形成され、グルプ選択バがデプロイメント計画に追加されます。不連続のタスクを選択した場合、それらのタスクは、選択されている最上位のタスクから始まる連続リストを形成します。

次の図は、並列グルプを示しています。グルプ選択バは、グルプのタイプ (並列 <img class="inline" src="../UCCR/images/para-select.png"  alt="並列グルプ選択"> または順次 <img class="inline" src="../UCCR/images/seq-select.png"  alt="順次グルプ選択">) を識別します。

(![](../UCCR/images/group-select.png "標準的なデプロイメント計画"))

*図 2. 並列グルプ*

グルプを移動するには、**「グルプ選択バ」**をクリックするか、グルプ内の任意の場所をクリックし、新しい場所にドラッグします。

グルプをコピするには、グルプを選択し、**「コピ」**アイコン <img class="inline" src="../UCCR/images/copy-group.png"  alt="コピ・アイコン"> をクリックし、コピしたグルプを挿入する場所にカソルを置き、**「貼り付け」** <img class="inline" src="../UCCR/images/paste-group.png"  alt="貼り付けアイコン"> をクリックします。

グルプを切り取るには、グルプを選択し、**「切り取り」**アイコン <img class="inline" src="../UCCR/images/cut-group.png"  alt="切り取りアイコン"> をクリックします。

グルプ化を解除するには、グルプを選択し、グルプ選択バの**「グルプ化解除」**アイコン <img class="inline" src="../UCCR/images/ungroup-icon.png"  alt="グルプ化解除アイコン"> をクリックします。

グルプ内のタスクを削除するには、グルプを選択し、**「削除」**アイコン <img class="inline" src="../UCCR/images/trash-group.png"  alt="削除アイコン"> をクリックします。デプロイメント計画からタスクが削除されます。

## タスクのタグの管理
{: #tasks_tags}

タグは、タスクに追加できる編成要素です。デプロイメント計画をタグでフィルタに掛けることができます。例えば、タスクが開発環境専用であることを示す `DEV_only`タグを含むタスクを、実稼働環境へのデプロイメント中に無効にすることがあります。

タスクにタグを追加するには、以下のステップを実行します。

1. 「デプロイメント計画の詳細」ペジで、タスクまたはタスク・グルプを選択し、**「タグの管理」** <img class="inline" src="../UCCR/images/task-tag.png"  alt="タグの管理"> をクリックします。複数のタスクおよびグルプを選択できます。

1. 「選択したタスクのタグの管理 (Manage Tags for Selected Tasks)」ウィンドウで、**「共通タグ」**リストからタグを選択します。リストのテキスト・ボックスに名前を入力することにより、タグを作成できます。

1. **「保存」**をクリックします。

「デプロイメント計画の詳細」ペジのタスク行にタグが表示されます。以下の図で、Deploy WAR タスクには、`Deployment` と `Critical` という 2 つのタグがあります。

デプロイメント計画に使用されるタグは、「デプロイメント計画の詳細」ペジの**「バジョン」**タブに表示されます。タスクをデプロイメントに利用できないようにするには、タスクのタグをクリアします。「適用外」状況のタスクは開始できません。  

![](../UCCR/images/task-tag-labels.png "標準的なデプロイメント計画")

*図 3. タスクのタグ*

## タスクの依存関係の作成
{: #tasks_dependencies}

タスクを他のタスクの前提条件にすることができます。タスクが前提条件の場合、依存するタスクは適格であっても、前提条件タスクが解決されるまでは開始できません。

タスクは、複数の依存タスクと複数の前提条件タスクを持つことができます。タスクに対して、デプロイメント計画内の他のどのタスクとの依存関係でも定義できます。ただし、循環依存関係は作成できません。例えば、タスクがあるタスクに依存しており、依存されているタスク自体が最初のタスクに依存しているというような依存関係は作成できません。

タスクの依存関係を制御することにより、予想された順序でイベントが発生するようにすることができます。

タスクを他のタスクの前提条件にするには、以下のステップを実行します。

1. 「デプロイメント計画の詳細」ペジで、タスクまたはタスク・グルプを選択し、**「前提条件の管理」** <img class="inline" src="../UCCR/images/task-depend.png"  alt="タスクの前提条件"> をクリックします。複数のタスクおよびグルプを選択できます。

1. 「選択したタスクの前提条件の管理 (Manage Prerequisites for Selected Tasks)」ウィンドウで、**「選択したタスクの前提条件タスク (Prerequisite tasks for selected tasks)」**リストから前提条件タスクを選択します。

1. **「保存」**をクリックします。

「デプロイメント計画の詳細」ペジの「依存関係」列に、タスク依存関係が表示されます。上矢印はタスクの前提条件を示し、下矢印はタスクの依存関係を示しています。

以下の図で、最初のタスクには前提条件はなく、2 つのタスクがこのタスクに依存しています。2 番目のタスクには 1 つの前提条件タスクがありますが、このタスクに依存するタスクはありません。

(![](../UCCR/images/plan-w-depend.png "標準的なデプロイメント計画"))

*図 4. タスクの依存関係*

依存関係を検討または変更するには、タスクを選択し、**「前提条件の管理」** <img class="inline" src="../UCCR/images/task-depend.png"  alt="タスクの前提条件"> をクリックします。
