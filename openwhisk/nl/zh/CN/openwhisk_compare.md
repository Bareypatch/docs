---

copyright:
  years: 2016, 2017
lastupdated: 2017-04-26

---

{:shortdesc: .shortdesc}
{:codeblock: .codeblock}
{:screen: .screen}
{:pre: .pre}

# 功能即服务比较
{: #openwhisk_faas_compared}

无服务器体系结构虽说不是解决所有计算问题的万能措施，但确实能解决一些问题。有[许多用例](./openwhisk_use_cases.html)可能适合采用无服务器设计。下面我们将对以下体系结构进行比较：

1. **功能即服务 (FaaS)** - 受管 OpenWhisk。目前，IBM 是唯一一家提供受管 [OpenWhisk on Bluemix](https://console.ng.bluemix.net/openwhisk) 的供应商。

2. 带有 OpenWhisk 自行构建 (RYO) 的 **基础架构即服务 (IaaS)**。最终用户可以从 Apache Incubation Project 下载 OpenWhisk，然后将其安装在 [Bluemix IaaS](https://console.ng.bluemix.net/catalog/?category=devices) 或其他 [IaaS 云](https://en.wikipedia.org/wiki/Cloud_computing#Infrastructure_as_a_service_.28IaaS.29)上并运行。

3. **平台即服务 (PaaS)** - 受管应用程序运行时。由 IBM Bluemix CloudFoundry 实施管理的 [Liberty for Java](https://console.ng.bluemix.net/catalog/starters/liberty-for-java) 运行时就是一个很好的例子。

4. **容器即服务 (CaaS)** - 受管容器环境。IBM 的 [Containers on Bluemix](https://console.ng.bluemix.net/catalog/?category=containerImages) 就是一个很好的例子。

5. 带有 Java EE 运行时的 **基础架构即服务 (IaaS)**。[WebSphere Application Server VM on Bluemix](https://console.ng.bluemix.net/catalog/services/websphere-application-server) 就是一个很好的例子。

下面从在这些不同运行时上开发和运行应用程序的**最终用户的角度**，概述了每种体系结构选项的优缺点：


| 主题 | (1) OpenWhisk FaaS | (2) OpenWhisk RYO | (3) PaaS | (4) CaaS | (5) IaaS+Java EE |
| --- | --- | --- | --- | --- | --- |
|	应用程序单元	|	单个功能（通常是 JavaScript、Swift 或 Docker 容器中的小代码块）- 可能小于 1 Kb，但也可能更大。通常不超过几 Kb。	|	与列 (1) 相同	|	根据使用的运行时（可能为 EAR 或 WAR 文件或者其他特定于语言的应用程序捆绑软件），通常大小相对较大（Kb，在捆绑软件中有许多服务时甚至达到 Mb），但也可能与单个服务一样小	|	Docker 容器是部署单元。	|	VM+应用程序服务器+ EAR 或 WAR 文件和其他依赖项 - 通常大小达到 Gb。	|
|	资源占用量	|	最终用户不为内存、CPU 或其他资源付费，也不用关注这些资源。虽然操作会占用一些资源，但用户无需为此担心	|	高。最终用户必须首先供应 IaaS 环境，然后才基于该环境安装和配置 OpenWhisk	|	低。最终用户为运行中的应用程序占用的内存和 CPU 付费，但不会为未运行的应用程序付费	|	低到中等	|	高。最终用户必须为应用程序运行时使用的磁盘存储器、内存、CPU 及可能的其他组件付费。应用程序停止运行时，只发生存储器成本	|
|	安装和设置	|	无需安装和设置	|	困难 - 所有安装和设置均由最终用户完成	|	无需安装和设置	|	适度 - 硬件、网络、操作系统、容器管理工具由 CaaS 供应商提供，映像、连接和实例由最终用户提供	|	困难 - 硬件、网络、操作系统、初始 Java EE 安装由供应商提供，其他配置、集群、扩展由最终用户提供	|
|	供应时间	|	毫秒	|	请参阅列 (4) 和 (5)	|	分钟	|	分钟	|	小时	|
|	持续管理	|	无	|	困难	|	无	|	适度	|	困难	|
|	弹性扩展	|	每个操作始终根据负载即时进行固有扩展。无需提前供应 VM 或其他资源	|	未提供 - 最终用户必须在 IaaS 上提供计算能力并管理 VM 的扩展。一旦扩展了 VM 后，OpenWhisk 就会自动扩展操作，但资源必须已经提前供应	|	自动，但扩展速度慢。在峰值开始时，用户可能要等待若干分钟，扩展操作才能完成。自动扩展需要仔细调整	|	自动，但扩展速度慢。在峰值开始时，用户可能要等待若干分钟，扩展操作才能完成。自动扩展需要仔细调整	|	未提供	|
|	容量规划	|	不需要。FaaS 将自动根据需要提供容量	|	需要提前供应足够的容量或者对其编制脚本	|	需要进行一些容量规划，但提供了一些自动容量增加	|	需要进行一些容量规划，但提供了一些自动容量增加	|	需要静态供应足够的容量以处理峰值工作负载	|
|	持续连接和状态	|	非常有限 - 不能保持持续连接，但容器高速缓存的情况除外。通常，状态必须保留在外部资源中	|	与列 (1) 相同	|	支持 - 可以长时间保留打开的套接字或连接，也可以在调用之间在内存中存储状态	|	支持 - 可以长时间保留打开的套接字或连接，也可以在调用之间在内存中存储状态	|	支持 - 可以长时间保留打开的套接字或连接，也可以在调用之间在内存中存储状态	|
|	维护	|	不需要 - 整个堆栈由 IBM 管理	|	重要 - 根据目标环境，用户必须供应硬件、网络、操作系统、存储器、数据库以及安装和维护 OpenWhisk 等。	|	不需要 - 整个堆栈由供应商管理	|	重要 - 用户必须创建和维护定制映像，部署和管理容器以及容器之间的连接等。	|	重要 - 用户必须分配 VM，以及分别管理和扩展 Java EE 服务器	|
|	高可用性 (HA) 和灾难恢复 (DR)	|	固有/无额外成本	|	自行构建 (RYO) 	|	可用，但有额外成本	|	发生故障的容器可以自动重新启动	|	可用，但有额外成本，半自动。VM 可以自动故障转移	|
|	安全性	|	供应商提供	|	自行构建 (RYO)	|	RYO 和供应商提供混合	|	RYO 和供应商提供混合	|	自行构建 (RYO)	|
|	开发者活跃度	|	最高	|	最高	|	最高	|	一般	|	低	|
|	资源利用率（仍需要付费的空闲资源）	|	资源从不会空闲，因为仅当有请求时才会调用资源。没有工作负载时，不会分配资源，因此没有任何成本	|	由于此选项使用的是 IaaS 或 CaaS - 适用与列 (4) 和 (5) 中类似的注意事项	|	某些资源可能空闲。自动向上扩展和向下扩展有助于消除空闲资源，但一定数量的运行中实例必须始终存在，并且这些实例很可能只使用了不到 50% 的容量。停止的实例不会发生任何成本	|	类似于列 (3)	|	某些资源可能空闲。不支持自动扩展。一定数量的运行中实例必须始终存在，并且这些实例很可能只使用了不到 50% 的容量。停止的实例可能会发生存储器成本	|
|	成熟	|	未成熟	|	未成熟	|	未成熟	|	中等成熟	|	非常成熟	|
|	资源限制	|	[存在某些限制](./openwhisk_reference.html#openwhisk_syslimits)	|	取决于分配的资源	|	否	|	否	|	否	|
|	很少使用的服务的等待时间	|	很少使用的请求在最初的响应时间可能长达几秒，但后续请求的响应时间将在毫秒范围内	|	视情况而定	|	非常短	|	非常短	|	非常短 - 假定系统具有充足的资源	|
|	应用程序的最有效点类型	|	事件处理、IoT、移动后端和微服务。决不适用于庞大的应用程序。请参阅[用例](./openwhisk_use_cases.html)	|	与列 (1) 相同，但适用于用户要在非 IBM 云上运行或内部部署中运行时。	|	具有全天候工作负载和有状态服务的 Web 应用程序，需要使连接长时间保持打开。可用于运行微服务或庞大的应用程序	|	非常适用于微服务应用程序。	|	从内部部署迁移到云的传统企业应用程序。更适用于庞大的应用程序	|
|	收费粒度和记帐	|	[按 100 毫秒为单位](https://console.ng.bluemix.net/openwhisk/learn/pricing)	|	取决于实施情况 - 如果这使用的是 IaaS 或 CaaS，那么适用类似的注意事项 - 请参阅列 (4) 和 (5)	|	对于资源捆绑软件（CPU + 内存 + 某些磁盘空间），通常按小时收费（在极少情况下，按分钟收费）	|	类似于列 (3)	|	类似于列 (3)	|
|	总体拥有成本 (TCO)	|	对于其最有效点应用程序，很可能成本比替代方法少若干数量级。由于资源会自动扩展，因此从不会出现过量供应的问题	|	对于云部署，很可能会比 OpenWhisk FaaS 昂贵，但对于内部部署，可能比传统体系结构便宜	|	相对低 - 用户无需供应或管理资源，而只需要关注自己的应用程序，但是相对于无服务器，会存在一定水平的过量供应	|	适度 - 用户需要供应和管理容器与应用程序，但相对于无服务器和 PaaS，都存在一定水平的过量供应	|	相对高，但考虑到将旧应用程序迁移到云本机模型的成本可能高昂得无法承受，对于这些应用程序来说，这可能是可行、经济的选择	|
